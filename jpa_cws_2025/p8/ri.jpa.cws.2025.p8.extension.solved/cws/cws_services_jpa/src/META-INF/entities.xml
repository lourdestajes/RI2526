<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://xmlns.jcp.org/xml/ns/persistence/orm"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence/orm
                                     http://xmlns.jcp.org/xml/ns/persistence/orm_2_2.xsd"
                 version="2.2">

    <!-- Optional: package for all entity classes (avoids repeating full package names) -->
    <package>uo.ri.cws.domain</package>

<!-- ================================================================ -->
<!--  STRUCTURE OF THE FILE                                           -->
<!-- <entity-mappings>                                                -->
<!--     1. <package>?                                                -->
<!--     2. <schema>?                                                 -->
<!--     3. <catalog>?                                                -->
<!--     4. <access>?                                                 -->
<!--     5. <sequence-generator>*                                     -->
<!--     6. <table-generator>*                                        -->
<!--     7. <named-query>*                                            -->
<!--     8. <named-native-query>*                                     -->
<!--     9. <sql-result-set-mapping>*                                 -->
<!--    10. <embeddable>*          ← You put it here                  -->
<!--    11. <mapped-superclass>*   ← BaseEntity should be here        -->
<!--                                 EclipseLink does not support it  -->
<!--    12. <entity>*              ← Client goes here                 -->
<!-- </entity-mappings>                                               -->
<!-- ================================================================ -->

    <!-- ================== -->
    <!--  ENTITIES BELOW    -->
    <!-- ================== -->

<!-- ================================================================= -->
<!--  <basic> tells JPA: “This field is a simple, non-relationship     -->
<!--                    value — map it directly to a database column.” -->
<!-- It is the XML equivalent of the @Basic annotation                 --> 
<!--  (which is optional in Java, but required in XML).                -->
<!-- ================================================================= -->
   
<!-- ====================== Client ====================== -->  
    <entity class="Client">
        <table name="TCLIENTS"/>
        <attributes>
            <!-- Inherit everything from BaseEntity automatically -->

            <!-- Client-specific fields -->
            <basic name="nif">
                <column name="nif" nullable="false" length="50" unique="true"/>
            </basic>
            <basic name="name">
                <column name="name"/>
            </basic>
            <basic name="surname">
                <column name="surname"/>
            </basic>
            <basic name="email">
                <column name="EMAIL"/>
            </basic>
            <basic name="phone">
                <column name="phone"/>
            </basic>
            <one-to-many name="vehicles" mapped-by="client"/>
            <one-to-many name="paymentMeans" mapped-by="client"/>
        </attributes>
    </entity>

<!-- ====================== Mechanic ====================== -->  
    <entity class="Mechanic">
        <table name="TMECHANICS"/>
        <attributes>
            <!-- Inherit everything from BaseEntity automatically -->

            <!-- Mechanic-specific fields -->
            <basic name="nif">
                <column name="nif" unique="true"/>
            </basic>
            <basic name="name">
                <column name="name"/>
            </basic>
            <basic name="surname">
                <column name="surname"/>
            </basic>
            <one-to-many name="assigned" mapped-by="mechanic"/>
            <one-to-many name="interventions" mapped-by="mechanic"/>
            <one-to-many name="contracts" mapped-by="mechanic"/>
        </attributes>
    </entity>
    
    <!-- ====================== Vehicle ====================== -->
    <entity class="Vehicle">
        <table name="TVEHICLES"/>
        <attributes>
            <!-- Inherit everything from BaseEntity automatically -->

            <!-- Mechanic-specific fields -->
            <basic name="plateNumber" >
                <column name="platenumber" unique="true"/>
            </basic>
            <basic name="make"/>
            <basic name="model"/>
            <many-to-one name="client" target-entity="Client">
                <join-column name="client_id" referenced-column-name="id" />
            </many-to-one>
            <many-to-one name="vehicleType" target-entity="VehicleType">
                <join-column name="vehicleType_id" referenced-column-name="id" />
            </many-to-one>
            <one-to-many name="workOrders" mapped-by="vehicle"/>
        </attributes>
    </entity>
    
        <!-- ====================== VehicleType ====================== -->
    <entity class="VehicleType">
        <table name="TVEHICLETYPES"/>
        <attributes>
            <!-- Inherit everything from BaseEntity automatically -->

            <!-- Mechanic-specific fields -->
            <basic name="name" >
                <column name="name" unique="true"/>
            </basic>
            <basic name="pricePerHour"/>
            <one-to-many name="vehicles" mapped-by="vehicleType"/>
        </attributes>
    </entity>
</entity-mappings>